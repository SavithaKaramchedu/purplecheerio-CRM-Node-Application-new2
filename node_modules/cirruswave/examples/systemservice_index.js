
fs = require('fs');
var app = require('../../cirruswave');
var program = require('commander');
var defaultoptions=
{
	"appdir":__dirname,
	"aclconfig":"aclconfig.json",
	"secret":"helloworld",
	"appserviceconfig":"appserviceconfig.json"
};
function main()
 {
 	//initialize();
 	program
		.version('1.0')
		.option('-s, --servicename <servicename>', 'servicename')
		.option('-i, --initoptions <initoptions>', 'application specific options see serviceconfigfile init.options')
		.parse(process.argv);

	if (!process.argv.slice(2).length) {
	  program.outputHelp();
	  return;
	}

	if(program.servicename)
	{

		var servicename = program.servicename;
		//if(program.initoptions)
		//	console.log("initoptions="+program.initoptions);
		if(!program.initoptions)
			program.initoptions = JSON.stringify(defaultoptions);
		app.startsystemservice(servicename,JSON.parse(program.initoptions));
		return;
	}

 }

 main();



