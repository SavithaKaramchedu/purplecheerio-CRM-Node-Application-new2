#sudo vi /etc/elasticsearch/elasticsearch.yml
#sed /network.host: [_tun0_, _local_]
# give proper cluster name instead of production
cluster_name="production"
#sed -e '/#network/s/#network\.host\:[ ]*[0-9\.]*/network.host: [_tun0, _local_]/' \
#    -e '/#cluster/s/#cluster\.name\:[ ]*[a-z0-9\-]*/cluster.name: $cluster_name/' \
#    -e '/#discovery/s/#discovery\.seed_hosts\:[ ]*\[["a-z0-9, ]*\]/discovery.seed_hosts: ["host2", "host3", "host1"]/' \
#    elasticsearch.yml >es.yml
sed  -e '/#cluster/s/#cluster\.name\:[ ]*[a-z0-9\-]*/cluster.name: $cluster_name/'  elasticsearch.yml >es.yml

networkvpn="vpn_1"
echo "network.host: [${networkvpn},_local_]" >>es.yml

strMachines="discovery.seed_hosts:["
esnodes=()
esnodes+=('ip1')
esnodes+=('ip2')

comma=""

for i in "${esnodes[@]}"
do
   strMachines="${strMachines}${comma}${i}"
   comma=","
done
strMachines=$strMachines"]"
echo "$strMachines" >>es.yml

esmasters=()
esmasters+=('ip0')
esmasters+=('ip1')

#cluster.initial_master_nodes: ["node-1", "node-2"]

strMachines="cluster.initial_master_nodes:["

comma=""

for i in "${esmasters[@]}"
do
   strMachines="${strMachines}${comma}\"${i}\""
   comma=","
done
strMachines=$strMachines"]"
echo "$strMachines" >>es.yml


if [ ! -z $master ]
then
    echo "node.master: true" >> es.yml
    echo "node.data: false" >> es.yml
else
    echo "node.master: false" >> es.yml
    echo "node.data: true" >> es.yml
fi
#sudo systemctl start elasticsearch.service

