{
  "about": {
    "faviconurl":"/images/favicon.png",
    "imageurl":"/images/favicon.png",
    "name":"cirrus",
    "url":"https://www.cirruswave.com/",
    "description":"Sample services provided as documentation"
  },
  "services": {
    "keymgr": {
      "init": {
        "class": "./apikeymgr.js",
        "function": "initialize",
        "optionschema": {
          "type": "object",
          "required": [
            "appdir",
            "aclconfig",
            "appserviceconfig",
            "secret"
          ],
          "properties": {
            "appdir": {
              "description": "path to the application directory. All files are relative to this directory",
              "type": "string"
            },
            "aclconfig": {
              "description": "callee provided path where access-control-list for the microservice is stored",
              "type": "string"
            },
            "appserviceconfig": {
              "description": "callee provided fully qualified path to the appserviceconfig.json, This will let keymgr support issuing keys for the app services that are setup with security acckey",
              "type": "string"
            },
            "secret": {
              "description": "secret used to encrypt the acl file",
              "type": "string"
            },
            "persistence": {
              "type": "object",
              "required":[
                "type",
                "bucketname",
                "acckey",
                "secret",
                "region"
              ],
              "properties": {
                "type": {
                  "description": "type of persistence",
                  "type": {
                    "enum": [
                      "file",
                      "s3"
                    ]                    
                  }
                },
                "bucketname": {
                  "description":"name of s3 bucket",
                  "type":"string",
                  "minLength": 1
                },
                "acckey": {
                  "description": "access key part of credentials that gives access to the s3 bucket",
                  "type": "string",
                  "minLength": 1
                },
                "secret": {
                  "description": "secret key part of credentials that gives access to the s3 bucket",
                  "type": "string",
                  "minLength": 1
                },
                "region": {
                  "description": "region in which this s3 bucket exists",
                  "type": "string",
                  "minLength": 1
                }
              }
            }
          }
        },
        "options": {
          "appdir":".",
          "aclconfigpath":"./deploy/lib/aclconfig.json",
          "appserviceconfigpath":"./deploy/lib/serviceconfig.json",
          "secret": "password",
          "persistence": {
            "type":"s3",
            "bucketName":"cirruswavesupport-1",
            "acckey":"ackey",
            "secret":"secret"
          }
        }
      },
      "protocol": "https",
      "port": 4003,
      "hostname": "localhost",
      "certPath": "security/keymgr",
      "description": "REST Endpoint service for managing devloper keys.",
      "configfilepath": "./lib/keymgrconfig.json",
      "security": "appkey",
      "key": "1f443cc2647e0086272b426411670261"
    }
  }
}